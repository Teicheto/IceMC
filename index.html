<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IceMC - Начало</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="menu">
        <a href="index.html" class="active">Начало</a>
        <a href="about.html">За нас</a>
        <a href="join.html">Включи се</a>
        <a href="rules.html">Правила</a>
        <a href="features.html">Функции</a>
        <a href="community.html">Общност</a>
        <a href="vote.html">Гласувай</a>
        <a href="gallery.html">Галерия</a>
        <a href="staff.html">Екип</a>
        <a href="discord.html">Discord</a>
        
        <a href="login.html" id="loginLink" class="auth-link">Вход</a>
        <a href="register.html" id="registerLink" class="auth-link">Регистрация</a>

        <div class="user-menu-container" id="userMenuContainer" style="display: none;">
            <span class="user-greeting">Здравейте, <span id="displayedUserName">Потребител</span></span>
            <div class="user-dropdown">
                <a href="profile.html" id="profileLinkDropdown">Моят Профил</a>
                <a href="settings.html" id="settingsLinkDropdown">Настройки</a>
                <a href="#" id="logoutLinkDropdown">Изход</a>
            </div>
        </div>
    </div>

    <div class="background-container">
        <div class="stars"></div> 
        <main>
            <div class="container">
                <h1>Добре дошли в IceMC!</h1>
                <p>Вашето приключение в света на Minecraft започва тук.</p>
                <div class="server-status">
                    <h2>Server Status: <span id="serverStatus">Loading...</span></h2>
                    <p>Players Online: <span id="playersOnline">0</span>/<span id="maxPlayers">0</span></p>
                    <p>Server IP: <span class="ip-address">play.icemc.site</span> (кликни за копиране)</p>
                </div>
                <div class="content-section">
                    <h2>Присъединете се към нашата общност!</h2>
                    <p>IceMC е мястото, където ще намерите не само игра, но и приятели. Разгледайте нашите уникални режими, изградете свои собствени светове и участвайте в вълнуващи събития.</p>
                    <a href="join.html" class="btn">Как да се присъединиш</a>
                </div>
            </div>
        </main>
    </div>

    <footer class="footer">
        <p>&copy; 2025 IceMC. Всички права запазени.</p>
        <p>Minecraft is &copy; Mojang Synergies AB.</p>
    </footer>

    <audio id="hoverSound" src="sounds/hover.mp3" preload="auto"></audio>

    <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
    
    <script type="module" src="scripts.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const serverIpSpan = document.querySelector('.ip-address');
            if (serverIpSpan) {
                serverIpSpan.addEventListener('click', function() {
                    const ip = this.textContent;
                    navigator.clipboard.writeText(ip).then(() => {
                        const originalText = this.textContent;
                        this.textContent = 'Копирано!';
                        setTimeout(() => {
                            this.textContent = originalText;
                        }, 1500);
                    }).catch(err => {
                        console.error('Failed to copy IP: ', err);
                        alert('Неуспешно копиране на IP адреса.');
                    });
                });
            }

            // Function to fetch server status (example for a Minecraft server)
            async function fetchServerStatus() {
                const serverStatusElement = document.getElementById('serverStatus');
                const playersOnlineElement = document.getElementById('playersOnline');
                const maxPlayersElement = document.getElementById('maxPlayers');
                const serverIp = 'play.icemc.site'; // Your server IP

                try {
                    const response = await fetch(`https://api.mcstatus.io/v2/status/java/${serverIp}`);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const data = await response.json();

                    if (data.online) {
                        serverStatusElement.textContent = 'Online';
                        serverStatusElement.style.color = 'green';
                        playersOnlineElement.textContent = data.players.online;
                        maxPlayersElement.textContent = data.players.max;
                    } else {
                        serverStatusElement.textContent = 'Offline';
                        serverStatusElement.style.color = 'red';
                        playersOnlineElement.textContent = '0';
                        maxPlayersElement.textContent = '0';
                    }
                } catch (error) {
                    console.error('Error fetching server status:', error);
                    serverStatusElement.textContent = 'Unknown';
                    serverStatusElement.style.color = 'orange';
                    playersOnlineElement.textContent = 'N/A';
                    maxPlayersElement.textContent = 'N/A';
                }
            }

            fetchServerStatus(); // Call on page load
            // setInterval(fetchServerStatus, 60000); // Refresh every minute
        });
    </script>
</body>
</html>
